/*! gulp-start v0.0.1 | (c) 2020 Bulat | MIT License | https://github.com/BulatSa/gulp-start */
/*! gulp-start v0.0.1 | (c) 2020 Bulat | MIT License | https://github.com/BulatSa/gulp-start */
function initFancy(){$(".fancy").fancybox({buttons:["close"]}),$(".fancy-modal").fancybox({selector:"",touch:!1}),$(".fancy-map").fancybox({toolbar:!1,smallBtn:!0,defaultType:"iframe"}),$(".fancy-video").fancybox({toolbar:!1,smallBtn:!0,youtube:{controls:1,showinfo:0,autoplay:1}})}$((function(){$(".ajax-form").on("submit",(function(t){const n=$(this),o=n.find(".btn");let a=!0;t.preventDefault(),$(this).find("[data-req='true']").each((function(){""===$(this).val()&&($(this).addClass("error"),a=!1),$(this).is("select")&&null===$(this).val()&&($(this).addClass("error"),a=!1),$(this).is('input[type="checkbox"]')&&!0!==$(this).prop("checked")&&($(this).addClass("error"),a=!1),$(this).is('input[type="tel"]')&&$(this).cleanVal().length<11&&($(this).addClass("error"),a=!1)})),$(this).find("[data-req='true']").on("focus",(function(){$(this).removeClass("error")}));const e=$('input[type="file"]:not([disabled])',n);e.each((function(t,n){n.files.length>0||$(n).prop("disabled",!0)}));const s=new FormData(this);e.prop("disabled",!1),$("[data-label]").each((function(){const t=$(this).attr("name")+"_label",n=$(this).data("label").toString();s.append(t,n)})),!0===a&&(o.prop("disabled",!0),$.ajax({type:"POST",async:!0,url:"/send.php",cache:!1,contentType:!1,processData:!1,data:s,success:function(t){console.log(t),$.fancybox.close(),-1!==t.indexOf("Mail FAIL")?$.fancybox.open({src:"#modal-error"}):(setTimeout((function(){$.fancybox.open({src:"#modal-thanks"})}),600),setTimeout((function(){$.fancybox.close()}),4500),n[0].reset()),o.prop("disabled",!1)}}),setTimeout((function(){o.prop("disabled",!1)}),4500))}))})),$((function(){const t=$("input[type='tel']");String.prototype.replaceAt=function(t,n){return this.substr(0,t)+n+this.substr(t+n.length)};t.mask("+0 (000) 000-00-00",{onKeyPress:function(t,n,o,a){if("8"===t.charAt(1)){const t=o.get(0).value;o.get(0).value=t.replaceAt(1,"7")}}}),t.on("focus",(function(){$(this).get(0).value.length<2&&($(this).get(0).value="+")})),t.on("blur",(function(){"+"===$(this).get(0).value&&($(this).get(0).value="")}))})),$((function(){const t=/^((?!chrome|android).)*Macintosh/i.test(navigator.userAgent),n=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);(t||n)&&$(".class").length&&$(".class").addClass("is-macos")})),$.fancybox.defaults.backFocus=!1,$.fancybox.defaults.autoFocus=!1,$.fancybox.defaults.lang="ru",$.fancybox.defaults.i18n={ru:{CLOSE:"Закрыть",NEXT:"Дальше",PREV:"Назад",ERROR:"Не удается загрузить. <br/> Попробуйте позднее.",PLAY_START:"Начать слайдшоу",PLAY_STOP:"Остановить слайдшоу",FULL_SCREEN:"На весь экран",THUMBS:"Превью"}},$((function(){initFancy()})),$((function(){$(".scrollto").on("click",(function(){const t=$(this).attr("href"),n=$(t).offset().top;return $("html,body").stop().animate({scrollTop:n},1e3),!1}))})),$((function(){$(".anim").waypoint((function(){$(this.element).toggleClass("animated")}),{offset:"85%"})}));